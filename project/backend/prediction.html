<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regression Model Prediction</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
        }
        .container {
            max-width: 600px;
            margin: auto;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
        }
        .form-group input {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
        }
        .form-group button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        .form-group button:hover {
            background-color: #45a049;
        }
        .result {
            margin-top: 20px;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Regression Model Prediction</h1>
        <form id="prediction-form">
            <div id="features-container"></div>
            <div class="form-group">
                <button type="button" onclick="makePrediction()">Predict</button>
            </div>
        </form>
        <div class="result" id="result">Next Week's Deaths: -1</div>
    </div>
    <script>
        const featureNames = [
            'Location', 'Weekly Cases', 'Year', 'Weekly Cases per Million',
            'Weekly Deaths', 'Weekly Deaths per Million', 'Total Vaccinations',
            'People Vaccinated', 'People Fully Vaccinated', 'Total Boosters',
            'Daily Vaccinations', 'Total Vaccinations per Hundred',
            'People Vaccinated per Hundred', 'People Fully Vaccinated per Hundred',
            'Total Boosters per Hundred', 'Daily Vaccinations per Hundred',
            'Daily People Vaccinated', 'Daily People Vaccinated per Hundred',
            'Income', 'After Vaccine'
        ];

        // Criar campos de input para cada feature
        const featuresContainer = document.getElementById('features-container');
        featureNames.forEach((name, index) => {
            const formGroup = document.createElement('div');
            formGroup.className = 'form-group';
            formGroup.innerHTML = `
                <label for="feature-${index}">${name}</label>
                <input type="number" id="feature-${index}" name="${name}" required>
            `;
            featuresContainer.appendChild(formGroup);
        });

        function makePrediction() {
            const features = [];
            featureNames.forEach((name, index) => {
                const featureValue = document.getElementById(`feature-${index}`).value;
                features.push(parseFloat(featureValue));
            });

            const data = {
                features: features
            };

            fetch('http://127.0.0.1:8000/predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                document.getElementById('result').innerText = `Next Week's Deaths: ${result.prediction}`;
            })
            .catch(error => {
                document.getElementById('result').innerText = `Error: ${error.message}`;
                console.error('Error:', error);
            });
        }
    </script>
</body>
</html>
